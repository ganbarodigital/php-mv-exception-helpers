<!DOCTYPE html>
<html lang="en">
    <head>
        <!--[if lt IE 9]>
            <script src="assets/html5shiv.js"></script>
            <script src="assets/html5printshiv.js"></script>
        <![endif]-->
        <meta charset="utf-8"/>
        <title>Exception Helpers Library for PHP from Ganbaro Digital</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="http://ganbarodigital.github.io/php-mv-exception-helpers/assets/docs.css" rel="stylesheet"/>
        <link rel="stylesheet" href="http://ganbarodigital.github.io/php-mv-exception-helpers/assets/prism.css">
        <script src="http://ganbarodigital.github.io/php-mv-exception-helpers/assets/prism.js"></script>
    </head>
    <body data-ishi-anchors="1">
        <header role="banner">
            <div>
                <p style="font-size: 34px; padding-top: 10px">Exception Helpers Library for PHP</p>
                <p style="font-size: 18px; border-bottom: 1px solid; padding-bottom: 10px">Easy-to-use collection of helpers for your exceptions</p>
            </div>
            <!--<a href="http://ganbarodigital.github.io/php-mv-exception-helpers/index.html">
                <img src="http://ganbarodigital.github.io/php-mv-exception-helpers/assets/ganbarodigital.svg" width="60" height="60" style="vertical-align: middle; float: left; margin-right: 15px">
            </a>-->
            <nav class="navbar topbar">
                <ul>
                                            <li class="">
                            <a class="" href="http://ganbarodigital.github.io/php-mv-exception-helpers/index.html">Overview</a>
                        </li>
                                            <li class="current">
                            <a class="current" href="http://ganbarodigital.github.io/php-mv-exception-helpers/V1/index.html">Version 1.x</a>
                        </li>
                                    </ul>
            </nav>
        </header>
                                                                            <header role="subnav">
                        <nav class="navbar">
                            <ul>
                                                                    <li class="">
                                        <a class="" href="http://ganbarodigital.github.io/php-mv-exception-helpers/V1/index.html">Introduction</a>
                                    </li>
                                                                    <li class="">
                                        <a class="" href="http://ganbarodigital.github.io/php-mv-exception-helpers/V1/BaseExceptions/index.html">Base Exceptions</a>
                                    </li>
                                                                    <li class="current">
                                        <a class="current" href="http://ganbarodigital.github.io/php-mv-exception-helpers/V1/Callers/index.html">Callers</a>
                                    </li>
                                                            </ul>
                        </nav>
                    </header>
                                            <main role="main">
                        <nav class="pageflow">
              <ul>
                                    <li><a href="FilterBacktraceForTwoCodeCallers.html">Prev: FilterBacktraceForTwoCodeCallers class</a></li>
                                                      <li></li>
                                </ul>
            </nav>
            
            <article>
                <h1 id="filtercodecaller">FilterCodeCaller</h1>
<div class="callout info">
<p>Since v1.2016041701</p>
</div>
<h2 id="description">Description</h2>
<p><code>FilterCodeCaller</code> is a data filter. It is a wrapper around <a href="FilterBacktrace.html"><code>FilterBacktrace</code></a>. It converts <code>FilterBacktrace</code>'s return value into a <a href="CodeCaller.html"><code>CodeCaller</code></a> value object.</p>
<p><code>FilterCodeCaller</code> was introduced for use in the <code>UnsupportedType</code> exception.</p>
<h2 id="public-interface">Public Interface</h2>
<p><code>FilterCodeCaller</code> has the following public interface:</p>
<pre><code class="language-php">use GanbaroDigital\ExceptionHelpers\V1\Callers\Values\CodeCaller;

class FilterCodeCaller
{
    /**
     * work out who has called a piece of code
     *
     * @param  array $backtrace
     *         the debug_backtrace() return value
     * @param  array $$filterList
     *         a list of namespaces and classes to skip over
     * @return CodeCaller
     */
    public function __invoke($backtrace, $$filterList = []);

    /**
     * work out who has called a piece of code
     *
     * @param  array $backtrace
     *         the debug_backtrace() return value
     * @param  array $$filterList
     *         a list of namespaces and classes to skip over
     * @return CodeCaller
     */
    public static function from($backtrace, $$filterList = []);
}</code></pre>
<h2 id="how-to-use">How To Use</h2>
<p><code>FilterCodeCaller</code> can be used as an object, or as a static class method.</p>
<pre><code class="language-php">// import first
use GanbaroDigital\ExceptionHelpers\V1\Callers\Filters\FilterCodeCaller;

// we need a stack trace
// use DEBUG_BACKTRACE_IGNORE_ARGS to keep the trace very small
$trace = debug_backtrace(DEBUG_BACKTRACE_IGNORE_ARGS);

// we need a list of namespaces to filter out
//
// this can be individual namespaces, or classnames
$filterList = [
    'GanbaroDigital\Reflection\V1\Checks',
    'GanbaroDigital\Reflection\V1\Requirements',
    FilterCodeCaller::class,
];

// to use as an object
$filter = new FilterCodeCaller;
$caller = $filter($trace, $filterList);

// to call statically
$caller = FilterCodeCaller::from($trace, $filterList);</code></pre>
<h2 id="return-value">Return Value</h2>
<p><code>FilterCodeCaller</code> returns a <code>CodeCaller</code> value object. This object will contain details about the first entry on the <code>debug_backtrace()</code> stack that passed filtering.</p>
<h2 id="notes">Notes</h2>
<p>None at this time.</p>
<h2 id="changelog">Changelog</h2>
<h3 id="v12016052501">v1.2016052501</h3>
<ul>
<li>
<p><code>FilterCodeCaller</code> no longer filters out partial namespaces.</p>
<p>This was a disaster waiting to happen. Filtering partial namespaces meant that we'd filter out your namespaces too - and that's a violation of the rule of no surprises. It's just too blunt an instrument. We've switched to filtering out whole namespaces only to make sure that we never filter out your namespaces when we meant to only filter out our namespaces.</p>
</li>
<li>
<p>The public static property <code>FilterCodeCaller::$DEFAULT_PARTIALS</code> has been removed.</p>
<p>It has been removed because we're no longer supporting filtering out partial namespaces.</p>
<p>The truth is, it was always a bit of a risky hack. There was no way for us to prevent anyone from changing this list at runtime. It was a bug waiting to happen. So it's gone.</p>
<p>This is a backwards-compatibility break - the kind which can cause your code to crash. The whole point of versioned APIs is that you can trust us not to break your code. But in this case it was simply too dangerous a feature to keep. We're sorry if you're using this library and this change causes you problems.</p>
</li>
</ul>
<h2 id="see-also">See Also</h2>
<ul>
<li><a href="CodeCaller.html"><code>CodeCaller</code> value object</a></li>
<li><a href="FilterBacktrace.html"><code>FilterBacktrace</code> class</a></li>
</ul>
            </article>

                        <nav class="pageflow">
              <ul>
                                    <li><a href="FilterBacktraceForTwoCodeCallers.html">Prev: FilterBacktraceForTwoCodeCallers class</a></li>
                                                      <li></li>
                                </ul>
            </nav>
                    </main>

        <aside class="sidebar">
            <h2>This Page</h2>
            <nav class="toc" data-type="ishi-toc" data-max-depth="3">
            </nav>
        </aside>
        <footer>
            <div class="strapline">
                <p>Copyright &copy; 2015 <a href="http://ganbarodigital.com">Ganbaro Digital Ltd</a>. Released under the <a href="http://ganbarodigital.github.io/php-mv-exception-helpers/license.html">New BSD</a> license.
                                            Find Exception Helpers Library for PHP on <a href="https://github.com/ganbarodigital/php-mv-exception-helpers">GitHub</a>.
                                        Built with <a href="http://couscous.io/">Couscous</a>.
                </p>
            </div>
        </footer>
    <script src="http://ganbarodigital.github.io/php-mv-exception-helpers/assets/laroux.js"></script>
    <script src="http://ganbarodigital.github.io/php-mv-exception-helpers/assets/ishi.js"></script>
    </body>
</html>
